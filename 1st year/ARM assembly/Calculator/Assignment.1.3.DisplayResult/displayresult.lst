


ARM Macro Assembler    Page 1 


    1 00000000                 AREA             DisplayResult, CODE, READONLY
    2 00000000                 IMPORT           main
    3 00000000                 IMPORT           getkey
    4 00000000                 IMPORT           sendchar
    5 00000000                 EXPORT           start
    6 00000000                 PRESERVE8
    7 00000000         
    8 00000000         start
    9 00000000         
   10 00000000 E3A0300A        MOV              R3, #10
   11 00000004 E3A04000        MOV              R4,#0
   12 00000008 E3A06000        MOV              R6, #0
   13 0000000C         
   14 0000000C         read
   15 0000000C EBFFFFFE        BL               getkey      ; read key from con
                                                            sole
   16 00000010 E350000D        CMP              R0, #0x0D   ; while (key != ent
                                                            er)
   17 00000014 0A000010        BEQ              endRead     ; {
   18 00000018 EBFFFFFE        BL               sendchar    ;   echo key back t
                                                            o console
   19 0000001C         
   20 0000001C         ;
   21 0000001C         ; do any necessary processing of the key
   22 0000001C         ;
   23 0000001C         
   24 0000001C E350002A        CMP              R0, #'*'
   25 00000020 0A000007        BEQ              multiplyOperator
   26 00000024 E350002B        CMP              R0, #'+'
   27 00000028 0A000007        BEQ              addOperator
   28 0000002C E350002D        CMP              R0, #'-'
   29 00000030 0A000007        BEQ              subtractOperator
   30 00000034         
   31 00000034 E0040493        MUL              R4, R3, R4
   32 00000038 E2400030        SUB              R0, R0, #0x30
   33 0000003C E0804004        ADD              R4, R0, R4
   34 00000040         
   35 00000040 EAFFFFF1        B                read
   36 00000044         
   37 00000044         multiplyOperator
   38 00000044 E3A07001        LDR              R7,= 1
   39 00000048 EA000003        B                endRead
   40 0000004C         
   41 0000004C         addOperator
   42 0000004C E3A07002        LDR              R7,= 2
   43 00000050 EA000001        B                endRead
   44 00000054         
   45 00000054         subtractOperator
   46 00000054 E3A07003        LDR              R7,= 3
   47 00000058 EAFFFFFF        B                endRead
   48 0000005C         
   49 0000005C         endRead
   50 0000005C         
   51 0000005C         readAgain
   52 0000005C         
   53 0000005C EBFFFFFE        BL               getkey      ; read key from con
                                                            sole
   54 00000060 E350000D        CMP              R0, #0x0D   ; while (key != ent
                                                            er)



ARM Macro Assembler    Page 2 


   55 00000064 0A000004        BEQ              endReadAgain ; {
   56 00000068 EBFFFFFE        BL               sendchar    ;   echo key back t
                                                            o console
   57 0000006C         
   58 0000006C         ;
   59 0000006C         ; do any necessary processing of the key
   60 0000006C         ;
   61 0000006C         
   62 0000006C E0060693        MUL              R6, R3, R6
   63 00000070 E2400030        SUB              R0, R0, #0x30
   64 00000074 E0806006        ADD              R6, R0, R6
   65 00000078         
   66 00000078 EAFFFFF7        B                readAgain
   67 0000007C         
   68 0000007C         endReadAgain
   69 0000007C         
   70 0000007C         ;Ok, so at this point we have all the input and the oper
                       ators and all that jazz, do what you have to do...
   71 0000007C         ;By that I mean calculate stuff, its called a calculator
                       
   72 0000007C         
   73 0000007C E3570001        CMP              R7,#1
   74 00000080 0A000003        BEQ              multiplyExp
   75 00000084 E3570002        CMP              R7,#2
   76 00000088 0A000003        BEQ              addExp
   77 0000008C E3570003        CMP              R7,#3
   78 00000090 0A000003        BEQ              subtractExp
   79 00000094         
   80 00000094         multiplyExp
   81 00000094 E0050694        MUL              R5, R4, R6
   82 00000098 EA000003        B                endCalculate
   83 0000009C         
   84 0000009C         addExp
   85 0000009C E0845006        ADD              R5, R4, R6
   86 000000A0 EA000001        B                endCalculate
   87 000000A4         
   88 000000A4         subtractExp
   89 000000A4 E0445006        SUB              R5, R4, R6
   90 000000A8 EAFFFFFF        B                endCalculate
   91 000000AC         
   92 000000AC         endCalculate
   93 000000AC         
   94 000000AC         ;Print result to the terminal
   95 000000AC EBFFFFFE        BL               sendchar
   96 000000B0         
   97 000000B0         
   98 000000B0 EAFFFFFE 
                       stop    B                stop
   99 000000B4         
  100 000000B4                 END
Command Line: --debug --xref --diag_suppress=9931 --apcs=interwork --depend=.\d
isplayresult.d -o.\displayresult.o -IC:\Keil_v5\ARM\RV31\INC -IC:\Keil_v5\ARM\C
MSIS\Include -IC:\Keil_v5\ARM\INC\Philips --predefine="__EVAL SETA 1" --predefi
ne="__MICROLIB SETA 1" --predefine="__UVISION_VERSION SETA 524" --predefine="NO
_CLOCK_SETUP SETA 1" --predefine="NO_EMC_SETUP SETA 1" --predefine="RAM_INTVEC 
SETA 1" --predefine="RAM_MODE SETA 1" --predefine="REMAP SETA 1" --list=.\displ
ayresult.lst DisplayResult.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

DisplayResult 00000000

Symbol: DisplayResult
   Definitions
      At line 1 in file DisplayResult.s
   Uses
      None
Comment: DisplayResult unused
addExp 0000009C

Symbol: addExp
   Definitions
      At line 84 in file DisplayResult.s
   Uses
      At line 76 in file DisplayResult.s
Comment: addExp used once
addOperator 0000004C

Symbol: addOperator
   Definitions
      At line 41 in file DisplayResult.s
   Uses
      At line 27 in file DisplayResult.s
Comment: addOperator used once
endCalculate 000000AC

Symbol: endCalculate
   Definitions
      At line 92 in file DisplayResult.s
   Uses
      At line 82 in file DisplayResult.s
      At line 86 in file DisplayResult.s
      At line 90 in file DisplayResult.s

endRead 0000005C

Symbol: endRead
   Definitions
      At line 49 in file DisplayResult.s
   Uses
      At line 17 in file DisplayResult.s
      At line 39 in file DisplayResult.s
      At line 43 in file DisplayResult.s
      At line 47 in file DisplayResult.s

endReadAgain 0000007C

Symbol: endReadAgain
   Definitions
      At line 68 in file DisplayResult.s
   Uses
      At line 55 in file DisplayResult.s
Comment: endReadAgain used once
multiplyExp 00000094

Symbol: multiplyExp
   Definitions
      At line 80 in file DisplayResult.s
   Uses



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

      At line 74 in file DisplayResult.s
Comment: multiplyExp used once
multiplyOperator 00000044

Symbol: multiplyOperator
   Definitions
      At line 37 in file DisplayResult.s
   Uses
      At line 25 in file DisplayResult.s
Comment: multiplyOperator used once
read 0000000C

Symbol: read
   Definitions
      At line 14 in file DisplayResult.s
   Uses
      At line 35 in file DisplayResult.s
Comment: read used once
readAgain 0000005C

Symbol: readAgain
   Definitions
      At line 51 in file DisplayResult.s
   Uses
      At line 66 in file DisplayResult.s
Comment: readAgain used once
start 00000000

Symbol: start
   Definitions
      At line 8 in file DisplayResult.s
   Uses
      At line 5 in file DisplayResult.s
Comment: start used once
stop 000000B0

Symbol: stop
   Definitions
      At line 98 in file DisplayResult.s
   Uses
      At line 98 in file DisplayResult.s
Comment: stop used once
subtractExp 000000A4

Symbol: subtractExp
   Definitions
      At line 88 in file DisplayResult.s
   Uses
      At line 78 in file DisplayResult.s
Comment: subtractExp used once
subtractOperator 00000054

Symbol: subtractOperator
   Definitions
      At line 45 in file DisplayResult.s
   Uses
      At line 29 in file DisplayResult.s
Comment: subtractOperator used once
14 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

getkey 00000000

Symbol: getkey
   Definitions
      At line 3 in file DisplayResult.s
   Uses
      At line 15 in file DisplayResult.s
      At line 53 in file DisplayResult.s

main 00000000

Symbol: main
   Definitions
      At line 2 in file DisplayResult.s
   Uses
      None
Comment: main unused
sendchar 00000000

Symbol: sendchar
   Definitions
      At line 4 in file DisplayResult.s
   Uses
      At line 18 in file DisplayResult.s
      At line 56 in file DisplayResult.s
      At line 95 in file DisplayResult.s

3 symbols
355 symbols in table
