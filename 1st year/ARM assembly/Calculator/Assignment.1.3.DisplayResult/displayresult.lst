


ARM Macro Assembler    Page 1 


    1 00000000                 AREA             DisplayResult, CODE, READONLY
    2 00000000                 IMPORT           main
    3 00000000                 IMPORT           getkey
    4 00000000                 IMPORT           sendchar
    5 00000000                 EXPORT           start
    6 00000000                 PRESERVE8
    7 00000000         
    8 00000000         start
    9 00000000         
   10 00000000         startProgram
   11 00000000         
   12 00000000 E3A0300A        LDR              R3, =10
   13 00000004 E3A04000        LDR              R4,=0
   14 00000008 E3A06000        LDR              R6, =0
   15 0000000C         
   16 0000000C         read
   17 0000000C EBFFFFFE        BL               getkey      ; read key from con
                                                            sole
   18 00000010 E350000D        CMP              R0, #0x0D   ; while (key != ent
                                                            er)
   19 00000014 0A00001A        BEQ              endReadAgain ; {
   20 00000018 E350001B        CMP              R0, #0x1B
   21 0000001C 0A000044        BEQ              endProgram
   22 00000020 EBFFFFFE        BL               sendchar    ;   echo key back t
                                                            o console
   23 00000024         
   24 00000024         ;
   25 00000024         ; do any necessary processing of the key
   26 00000024         ;
   27 00000024         
   28 00000024 E350002A        CMP              R0, #'*'
   29 00000028 0A000007        BEQ              multiplyOperator
   30 0000002C E350002B        CMP              R0, #'+'
   31 00000030 0A000007        BEQ              addOperator
   32 00000034 E350002D        CMP              R0, #'-'
   33 00000038 0A000007        BEQ              subtractOperator
   34 0000003C         
   35 0000003C E0040493        MUL              R4, R3, R4
   36 00000040 E2400030        SUB              R0, R0, #0x30
   37 00000044 E0804004        ADD              R4, R0, R4
   38 00000048         
   39 00000048 EAFFFFEF        B                read
   40 0000004C         
   41 0000004C         multiplyOperator
   42 0000004C E3A07001        LDR              R7,= 1
   43 00000050 EA000003        B                endRead
   44 00000054         
   45 00000054         addOperator
   46 00000054 E3A07002        LDR              R7,= 2
   47 00000058 EA000001        B                endRead
   48 0000005C         
   49 0000005C         subtractOperator
   50 0000005C E3A07003        LDR              R7,= 3
   51 00000060 EAFFFFFF        B                endRead
   52 00000064         
   53 00000064         endRead
   54 00000064         
   55 00000064         readAgain
   56 00000064         



ARM Macro Assembler    Page 2 


   57 00000064 EBFFFFFE        BL               getkey      ; read key from con
                                                            sole
   58 00000068 E350000D        CMP              R0, #0x0D   ; while (key != ent
                                                            er)
   59 0000006C 0A000004        BEQ              endReadAgain ; {
   60 00000070 EBFFFFFE        BL               sendchar    ;   echo key back t
                                                            o console
   61 00000074         
   62 00000074         ;
   63 00000074         ; do any necessary processing of the key
   64 00000074         ;
   65 00000074         
   66 00000074 E0060693        MUL              R6, R3, R6
   67 00000078 E2400030        SUB              R0, R0, #0x30
   68 0000007C E0806006        ADD              R6, R0, R6
   69 00000080         
   70 00000080 EAFFFFF7        B                readAgain
   71 00000084         
   72 00000084         endReadAgain
   73 00000084         
   74 00000084 E3A0003D        LDR              R0, ='='
   75 00000088 EBFFFFFE        BL               sendchar
   76 0000008C         
   77 0000008C E3570001        CMP              R7,#1
   78 00000090 0A000003        BEQ              multiplyExp
   79 00000094 E3570002        CMP              R7,#2
   80 00000098 0A000003        BEQ              addExp
   81 0000009C E3570003        CMP              R7,#3
   82 000000A0 0A000003        BEQ              subtractExp
   83 000000A4         
   84 000000A4         multiplyExp
   85 000000A4 E0050694        MUL              R5, R4, R6
   86 000000A8 EA000003        B                endCalculate
   87 000000AC         
   88 000000AC         addExp
   89 000000AC E0845006        ADD              R5, R4, R6
   90 000000B0 EA000001        B                endCalculate
   91 000000B4         
   92 000000B4         subtractExp
   93 000000B4 E0445006        SUB              R5, R4, R6
   94 000000B8 EAFFFFFF        B                endCalculate
   95 000000BC         
   96 000000BC         endCalculate
   97 000000BC         
   98 000000BC E3A0A030        LDR              R10, =0X30  ;ASCII offset
   99 000000C0         
  100 000000C0 E3A08001        LDR              R8, =1      ;Power to test
  101 000000C4 E3A0C001        LDR              R12, =1     ;Actual power of nu
                                                            mber
  102 000000C8         
  103 000000C8         digits
  104 000000C8 E1550008        CMP              R5, R8
  105 000000CC DA000002        BLE              endDigits
  106 000000D0 E0080893        MUL              R8, R3, R8
  107 000000D4 E28CC001        ADD              R12, R12, #1
  108 000000D8 EAFFFFFA        B                digits
  109 000000DC         endDigits
  110 000000DC         
  111 000000DC         print



ARM Macro Assembler    Page 3 


  112 000000DC E3A08001        MOV              R8, #1      ;Power to test
  113 000000E0 E3A09001        MOV              R9, #1      ;Actual number to d
                                                            ivide
  114 000000E4         
  115 000000E4         power
  116 000000E4 E1550008        CMP              R5, R8
  117 000000E8 DA000002        BLE              endPower
  118 000000EC E1A09008        MOV              R9, R8
  119 000000F0 E0080893        MUL              R8, R3, R8
  120 000000F4 EAFFFFFA        B                power
  121 000000F8         endPower
  122 000000F8         
  123 000000F8 E3A0B000        LDR              R11, =0     ; Quotient 
  124 000000FC         
  125 000000FC         divide
  126 000000FC E1550009        CMP              R5, R9      ; while(remainder >
                                                            = power)
  127 00000100 3A000002        BLO              endDivide
  128 00000104 E0455009        SUB              R5, R5, R9
  129 00000108 E28BB001        ADD              R11, R11, #1
  130 0000010C EAFFFFFA        B                divide
  131 00000110         endDivide
  132 00000110         
  133 00000110 E24CC001        SUB              R12, R12, #1
  134 00000114 E35C0000        CMP              R12, #0
  135 00000118 0A000002        BEQ              endPrint
  136 0000011C E08A000B        ADD              R0, R10, R11
  137 00000120 EBFFFFFE        BL               sendchar
  138 00000124 EAFFFFEC        B                print
  139 00000128         
  140 00000128         endPrint
  141 00000128         
  142 00000128 E3A0000A        LDR              R0, =0xA
  143 0000012C EBFFFFFE        BL               sendchar
  144 00000130         
  145 00000130 EAFFFFB2        B                startProgram
  146 00000134         
  147 00000134         endProgram
  148 00000134         
  149 00000134 E3A00047        LDR              R0, =0x47
  150 00000138 EBFFFFFE        BL               sendchar
  151 0000013C E3A0006F        LDR              R0, =0x6F
  152 00000140 EBFFFFFE        BL               sendchar
  153 00000144 E3A0006F        LDR              R0, =0x6F
  154 00000148 EBFFFFFE        BL               sendchar
  155 0000014C E3A00064        LDR              R0, =0x64
  156 00000150 EBFFFFFE        BL               sendchar
  157 00000154 E3A00062        LDR              R0, =0x62
  158 00000158 EBFFFFFE        BL               sendchar
  159 0000015C E3A00079        LDR              R0, =0x79
  160 00000160 EBFFFFFE        BL               sendchar
  161 00000164 E3A00065        LDR              R0, =0x65
  162 00000168 EBFFFFFE        BL               sendchar
  163 0000016C E3A00021        LDR              R0, =0x21
  164 00000170 EBFFFFFE        BL               sendchar
  165 00000174         
  166 00000174 EAFFFFFE 
                       stop    B                stop
  167 00000178         



ARM Macro Assembler    Page 4 


  168 00000178                 END
Command Line: --debug --xref --diag_suppress=9931 --apcs=interwork --depend=.\d
isplayresult.d -o.\displayresult.o -IC:\Keil_v5\ARM\RV31\INC -IC:\Keil_v5\ARM\C
MSIS\Include -IC:\Keil_v5\ARM\INC\Philips --predefine="__EVAL SETA 1" --predefi
ne="__MICROLIB SETA 1" --predefine="__UVISION_VERSION SETA 524" --predefine="NO
_CLOCK_SETUP SETA 1" --predefine="NO_EMC_SETUP SETA 1" --predefine="RAM_INTVEC 
SETA 1" --predefine="RAM_MODE SETA 1" --predefine="REMAP SETA 1" --list=.\displ
ayresult.lst DisplayResult.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

DisplayResult 00000000

Symbol: DisplayResult
   Definitions
      At line 1 in file DisplayResult.s
   Uses
      None
Comment: DisplayResult unused
addExp 000000AC

Symbol: addExp
   Definitions
      At line 88 in file DisplayResult.s
   Uses
      At line 80 in file DisplayResult.s
Comment: addExp used once
addOperator 00000054

Symbol: addOperator
   Definitions
      At line 45 in file DisplayResult.s
   Uses
      At line 31 in file DisplayResult.s
Comment: addOperator used once
digits 000000C8

Symbol: digits
   Definitions
      At line 103 in file DisplayResult.s
   Uses
      At line 108 in file DisplayResult.s
Comment: digits used once
divide 000000FC

Symbol: divide
   Definitions
      At line 125 in file DisplayResult.s
   Uses
      At line 130 in file DisplayResult.s
Comment: divide used once
endCalculate 000000BC

Symbol: endCalculate
   Definitions
      At line 96 in file DisplayResult.s
   Uses
      At line 86 in file DisplayResult.s
      At line 90 in file DisplayResult.s
      At line 94 in file DisplayResult.s

endDigits 000000DC

Symbol: endDigits
   Definitions
      At line 109 in file DisplayResult.s
   Uses
      At line 105 in file DisplayResult.s
Comment: endDigits used once
endDivide 00000110



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols


Symbol: endDivide
   Definitions
      At line 131 in file DisplayResult.s
   Uses
      At line 127 in file DisplayResult.s
Comment: endDivide used once
endPower 000000F8

Symbol: endPower
   Definitions
      At line 121 in file DisplayResult.s
   Uses
      At line 117 in file DisplayResult.s
Comment: endPower used once
endPrint 00000128

Symbol: endPrint
   Definitions
      At line 140 in file DisplayResult.s
   Uses
      At line 135 in file DisplayResult.s
Comment: endPrint used once
endProgram 00000134

Symbol: endProgram
   Definitions
      At line 147 in file DisplayResult.s
   Uses
      At line 21 in file DisplayResult.s
Comment: endProgram used once
endRead 00000064

Symbol: endRead
   Definitions
      At line 53 in file DisplayResult.s
   Uses
      At line 43 in file DisplayResult.s
      At line 47 in file DisplayResult.s
      At line 51 in file DisplayResult.s

endReadAgain 00000084

Symbol: endReadAgain
   Definitions
      At line 72 in file DisplayResult.s
   Uses
      At line 19 in file DisplayResult.s
      At line 59 in file DisplayResult.s

multiplyExp 000000A4

Symbol: multiplyExp
   Definitions
      At line 84 in file DisplayResult.s
   Uses
      At line 78 in file DisplayResult.s
Comment: multiplyExp used once
multiplyOperator 0000004C



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Relocatable symbols


Symbol: multiplyOperator
   Definitions
      At line 41 in file DisplayResult.s
   Uses
      At line 29 in file DisplayResult.s
Comment: multiplyOperator used once
power 000000E4

Symbol: power
   Definitions
      At line 115 in file DisplayResult.s
   Uses
      At line 120 in file DisplayResult.s
Comment: power used once
print 000000DC

Symbol: print
   Definitions
      At line 111 in file DisplayResult.s
   Uses
      At line 138 in file DisplayResult.s
Comment: print used once
read 0000000C

Symbol: read
   Definitions
      At line 16 in file DisplayResult.s
   Uses
      At line 39 in file DisplayResult.s
Comment: read used once
readAgain 00000064

Symbol: readAgain
   Definitions
      At line 55 in file DisplayResult.s
   Uses
      At line 70 in file DisplayResult.s
Comment: readAgain used once
start 00000000

Symbol: start
   Definitions
      At line 8 in file DisplayResult.s
   Uses
      At line 5 in file DisplayResult.s
Comment: start used once
startProgram 00000000

Symbol: startProgram
   Definitions
      At line 10 in file DisplayResult.s
   Uses
      At line 145 in file DisplayResult.s
Comment: startProgram used once
stop 00000174

Symbol: stop
   Definitions



ARM Macro Assembler    Page 4 Alphabetic symbol ordering
Relocatable symbols

      At line 166 in file DisplayResult.s
   Uses
      At line 166 in file DisplayResult.s
Comment: stop used once
subtractExp 000000B4

Symbol: subtractExp
   Definitions
      At line 92 in file DisplayResult.s
   Uses
      At line 82 in file DisplayResult.s
Comment: subtractExp used once
subtractOperator 0000005C

Symbol: subtractOperator
   Definitions
      At line 49 in file DisplayResult.s
   Uses
      At line 33 in file DisplayResult.s
Comment: subtractOperator used once
24 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

getkey 00000000

Symbol: getkey
   Definitions
      At line 3 in file DisplayResult.s
   Uses
      At line 17 in file DisplayResult.s
      At line 57 in file DisplayResult.s

main 00000000

Symbol: main
   Definitions
      At line 2 in file DisplayResult.s
   Uses
      None
Comment: main unused
sendchar 00000000

Symbol: sendchar
   Definitions
      At line 4 in file DisplayResult.s
   Uses
      At line 22 in file DisplayResult.s
      At line 60 in file DisplayResult.s
      At line 75 in file DisplayResult.s
      At line 137 in file DisplayResult.s
      At line 143 in file DisplayResult.s
      At line 150 in file DisplayResult.s
      At line 152 in file DisplayResult.s
      At line 154 in file DisplayResult.s
      At line 156 in file DisplayResult.s
      At line 158 in file DisplayResult.s
      At line 160 in file DisplayResult.s
      At line 162 in file DisplayResult.s
      At line 164 in file DisplayResult.s

3 symbols
365 symbols in table
